{% extends 'templates/layout.twig' %}
{% block title %}{{interface_ui.title_home | capitalize}}{% endblock %}
{% block googletagmanager %}
<script>
  dataLayer = [{
    'pageCategory': 'home'
  }];
</script>
{% endblock %}
{% block banner_mobile_top %}
    {% include 'banners/banner_320x100_top.twig' %}
{% endblock %}


{% block content %}

    {% set i = 0 %}
    {% set j = 0 %}
    <div class="row">
        {% if flash.message('imgface') %}
            <div class="col-sm-12" style="margin-top:20px;" id="div_erreur_aut">
              <div class="alert alert-warning col-xs-12 col-sm-10 col-sm-offset-1" id="erreur_aut">
                  {{ flash.message('imgface')[0] }}
              </div>
            </div>
        {% endif %}
    </div>

    {% if is_mobile() or is_tablet() %}
        {% set banner = random(['banners/banner_320x50_middle_top_mobile.twig', 'banners/banner_300x250_middle_top_mobile.twig']) %}
        <div class="row text-center" style="margin-top:1.5em">
            {% include banner %}
        </div>
    {% endif %}

    <div class="">
      <a href="http://bit.ly/gainde2018" target="_blank"><img src="{{storage_base}}/images/banner/image_Filtre1280x400.jpg" style="max-width: 100%;" alt="Senegal"></a>
    </div>

    <div class="row text-center" style="margin-top:0.5em">
    <h3 style="margin:.5em auto 1em;">{{interface_ui.label_discover | capitalize}}</h3>

    {% if all_test %}
        {% for single_test in all_test %}
          {% if is_mobile() or is_tablet() %}
            <div class="col-md-4 portfolio-item">
                <div class="border" data-test-id="{{single_test.id_test}}">
                    <img class="img-responsive" src="{{ storage_base }}/images{{ single_test.url_image_test |trim('.', 'left') }}" alt="image du test">
                    <span class="mobile-layer"></span>
                    <a class="test__link btn_to_track" href="{{ path_for('singledis', { 'from': 'discover', 'id': single_test.id_test, 'name': single_test.titre_test | twig_title_url(single_test.id_test, lang) }) }}" data-btn="btn-test"></a>
                    <h3 class="test-title">{{ single_test.titre_test }}</h3>
                    <div class="test__next"><a href="{{ path_for('singledis', { 'from': 'discover', 'id': single_test.id_test, 'name': single_test.titre_test | twig_title_url(single_test.id_test, lang) }) }}" class="btn btn-primary col-sm-8 col-sm-offset-2 btn_to_track"  data-btn="btn-test">{{interface_ui.btn_do_test}} <i class="fa fa-arrow-right"></i></a></div>
                </div>
            </div>
            {% set i = i+1 %}
            {% if i is divisible by(3) %}
                {% set j = j + 1 %}
                </div>
                {% if j == 1 %}
                    {% if is_mobile() or is_tablet() %}
                        <div class="" style="margin:5px auto 10px">
                            {% set banner = random(['banners/banner_360x300_responsive_bottom.twig', 'banners/banner_300x250_bottom.twig']) %}
                            {% include  banner %}
                        </div>
                    {% endif %}
                {% endif %}
                <div class="row text-center">
            {% endif %}
          {% else %}
          <div class="col-sm-6 col-md-4 portfolio-item-gallery">
                <div class="border_gallery" >
                    <img class="img-responsive" src="{{ storage_base }}/images{{ single_test.url_image_test |trim('.', 'left') }}" alt="image du test" style="width: 100%; height: 100%; object-fit: cover; object-position: 0 30%;">
                    <span class="mobile-layer"></span>
                    <!-- <a href="{{ path_for('single', { 'id': single_test.id_test, 'name': single_test.titre_test | twig_clean_url }) }}" class="test__link" data-btn="btn-test"></a> -->
                    <a href="{{ domain_url }}/test/{{single_test.titre_test | twig_title_url(single_test.id_test, lang)}}/{{single_test.id_test}}" class="test__link" data-btn="btn-test"></a>

                </div>
                <div  class="test-title-gallery">
                  <span style="font-size:14px;">{{ single_test.titre_test }}</span>
                </div>
          </div>

          {% set i = i+1 %}
          {% if i is divisible by(3) %}
              {% set j = j + 1 %}
              </div>
              {% if j == 1 %}
                  {% if is_mobile() or is_tablet() %}
                      <div class="" style="margin:5px auto 10px">
                          {% set banner = random(['banners/banner_360x300_responsive_bottom.twig', 'banners/banner_300x250_bottom.twig']) %}
                          {% include  banner %}
                      </div>
                  {% endif %}
              {% endif %}
              <div class="row text-center">
          {% endif %}
          {% endif %}

        {% endfor %}
    {% endif %}
    </div>
    <div class="col-xs-12 col-sm-6 col-sm-offset-3" style="margin-top:1em; margin-bottom:2em"><a class="btn btn-default btn-lg btn-accueil" href="{{ path_for('accueil') }}?utm=all_test"><i class="fa fa-home"></i> {{interface_ui.btn_home | capitalize}}</a></div>

{% endblock %}
